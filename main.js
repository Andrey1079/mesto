(()=>{"use strict";var t={formSelector:".popup__form",inputSelector:".popup__form-item",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",errorClass:"popup__form-item-error_visible",inputErrorClass:".popup__form-item-error"},e=document.querySelector(".popup-edit-profile"),r=document.querySelector(".profile__edit-profile-button"),n=e.querySelector(".popup__form_type_edit-profile"),o={},i=document.querySelector(".popup-add-photo"),u=document.querySelector(".profile__add-photo-button"),s=i.querySelector(".popup__form_type_add-photo"),a=document.querySelector(".popup-edit-avatar"),c=document.querySelector(".profile__avatar-edit-button"),l=a.querySelector(".popup__form_type_edit-avatar"),f=document.querySelector(".popup__error-message");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}var h=function(){function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._galleryItemTemplate=document.querySelector(r).content.cloneNode(!0),this._galeryImage=this._galleryItemTemplate.querySelector(".gallery__image"),this._galeryCaption=this._galleryItemTemplate.querySelector(".gallery__city"),this._gallerylikeButton=this._galleryItemTemplate.querySelector(".gallery__like-button"),this._galleryTrashButton=this._galleryItemTemplate.querySelector(".gallery__bin-button"),this._galleryItem=this._galleryItemTemplate.querySelector(".gallery__item"),this._like_counter=this._galleryItemTemplate.querySelector(".gallery__like-counter"),this._likesArray=e.likes,this._likesQuantity=e.likes.length,this._cardId=e._id,this._galleryItemTemplate.querySelector(".gallery__item"),this._caption=e.name,this._url=e.link,this._cardOwner=e.owner.name,this.openPopupFunc=n,this.openPopupConfirm=o,this._likesToggleFunc=i}var e,r;return e=t,(r=[{key:"setCard",value:function(){return this._checkOwnerCard(this._cardOwner),this.setLikes(this._likesArray),this._setEventLIsteners(),this._galeryImage.src=this._url,this._galeryImage.alt=this._caption,this._galeryCaption.textContent=this._caption,this._galleryItemTemplate}},{key:"_setEventLIsteners",value:function(){var t=this;this._gallerylikeButton.addEventListener("click",(function(e){return t._likesToggleFunc(t._cardId,t._likesArray)})),this._galleryTrashButton.addEventListener("click",(function(e){t._deleteGalleryItem(t._galleryItemTemplate)})),this._galeryImage.addEventListener("click",(function(e){t.openPopupFunc(t._galeryImage.src,t._galeryImage.alt)}))}},{key:"_deleteGalleryItem",value:function(){this.openPopupConfirm(this._cardId,this._galleryItem)}},{key:"_checkOwnerCard",value:function(t){t!==o.name&&this._galleryTrashButton.classList.add("gallery__bin-button_invisible")}},{key:"setLikes",value:function(t){t.some((function(t){return t.name===o.name}))?this._gallerylikeButton.classList.add("gallery__like-button_active"):this._gallerylikeButton.classList.remove("gallery__like-button_active"),this._like_counter.textContent=t.length,this._likesArray=t}}])&&y(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===b(o)?o:String(o)),n)}var o}var v=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formElement=r,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._errorClass=e.errorClass,this._inputErrorClass=e.inputErrorClass,this._inputs=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._errorMessages=Array.from(this._formElement.querySelectorAll(this._inputErrorClass))}var e,r;return e=t,(r=[{key:"enableValidation",value:function(){this._setEventListener()}},{key:"_setEventListener",value:function(){var t=this;this._toggleButtonState(),this._inputs.forEach((function(e){t._checkInputValidity(e),addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"_checkInputValidity",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.validity.valid?this._hideInputError(e):this._showInputError(e,t.validationMessage)}},{key:"_showInputError",value:function(t,e){t.textContent=e,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){t.classList.remove(this._errorClass),t.textContent=""}},{key:"_disableSubmitButton",value:function(t,e){t.classList.add(e),t.setAttribute("disabled","disabled")}},{key:"_enableSubmitButton",value:function(t,e){t.classList.remove(e),t.removeAttribute("disabled","disabled")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputs)?this._disableSubmitButton(this._submitButton,this._inactiveButtonClass):this._enableSubmitButton(this._submitButton,this._inactiveButtonClass)}},{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(t){return!t.validity.valid}))}},{key:"resetInputsErrors",value:function(){var t=this;this._toggleButtonState(),this._errorMessages.forEach((function(e){t._hideInputError(e)}))}}])&&m(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===_(o)?o:String(o)),n)}var o}var g=function(){function t(e,r){var n=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=n,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItemsFromArray",value:function(t){var e=this;t.forEach((function(t){e.addItem(e._renderer(t))}))}}])&&d(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}function k(t,e,r){return(e=j(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t){var e=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===S(e)?e:String(e)}var O=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,"_handleEscClose",(function(t){"Escape"===t.key&&r.close()})),k(this,"_closePopupByClickOverlay",(function(t){t.target===t.currentTarget&&r.close()})),this._popup=document.querySelector(e),this._popupCloseButton=this._popup.querySelector(".popup__close-button ")}var e,r;return e=t,(r=[{key:"open",value:function(){this._popup.classList.add("popup_visible"),this._popup.addEventListener("mousedown",this._closePopupByClickOverlay),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_visible"),this._popup.removeEventListener("mousedown",this._closePopupByClickOverlay),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popupCloseButton.addEventListener("click",this.close.bind(this))}}])&&w(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},I.apply(this,arguments)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(o){var r=T(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._image=e._popup.querySelector(".popup__img"),e._caption=e._popup.querySelector(".popup__place-name-of-big-photo"),e}return e=u,(r=[{key:"open",value:function(t){this._image.src=t.src,this._image.alt=t.alt,this._caption.textContent=t.alt,I(T(u.prototype),"open",this).call(this)}}])&&P(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(O);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==B(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===B(o)?o:String(o)),n)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},F.apply(this,arguments)}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(n);if(o){var r=A(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var r,n=t.submitFunc;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._submitFunc=n,r._form=r._popup.querySelector(".popup__form"),r._inputs=r._form.querySelectorAll(".popup__form-item"),r}return e=u,(r=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputs=Array.from(this._inputs),this._inputs.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}},{key:"setInputValues",value:function(t){this._inputs.forEach((function(e){e.value=t[e.name]}))}},{key:"setEventListeners",value:function(){var t=this;F(A(u.prototype),"setEventListeners",this).call(this),this._SubmitCallback=function(e){e.preventDefault(),t._submitFunc(t._getInputValues.bind(t)()),t.close()},this._form.addEventListener("submit",this._SubmitCallback)}},{key:"close",value:function(){this._form.reset(),F(A(u.prototype),"close",this).call(this)}}])&&q(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(O);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===x(o)?o:String(o)),n)}var o}var V=function(){function t(e){var r=e.userDataSelectors;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameField=document.querySelector(r.userNameSelector),this._userProfessionField=document.querySelector(r.userProfessionSelector),this._userAvatar=document.querySelector(r.userAvatarSelector)}var e,r;return e=t,r=[{key:"getUserInfo",value:function(){return this._userDataForInputs={},this._userDataForInputs.name=this._userNameField.textContent,this._userDataForInputs.profession=this._userProfessionField.textContent,this._userDataForInputs}},{key:"setUserInfo",value:function(t){this._userNameField.textContent=t.name,this._userProfessionField.textContent=t.profession}},{key:"setAvatar",value:function(t){this._userAvatar.style.backgroundImage="url(".concat(t.url,")")}}],r&&D(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==M(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===M(o)?o:String(o)),n)}var o}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},G.apply(this,arguments)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(n);if(o){var r=H(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var r,n=e.submitFunc;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._submitFunc=n,r._submitButton=r._popup.querySelector(".popup__submit-button"),r}return e=u,(r=[{key:"open",value:function(t,e){var r=this;this._submitCallback=function(n){r._submitFunc(t),r.close(),e.remove(),e=null},this._submitButton.addEventListener("click",this._submitCallback),G(H(u.prototype),"open",this).call(this)}}])&&N(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(O);function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===Q(o)?o:String(o)),n)}var o}var W=function(){function t(e,r){var n=r.showErrFunc;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._showErrorMessasge=n,this._baseUrl=e.baseUrl,this._settingsObj={},this._settingsObj.method="GET",this._settingsObj.headers=e.headers}var e,r;return e=t,r=[{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),this._settingsObj).then((function(e){return e.ok?e.json():(t._showErrorMessasge("Ошибка: ".concat(e.status)),Promise.reject("Ошибка: ".concat(e.status)))}))}},{key:"getInitialCards",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),this._settingsObj).then((function(e){return e.ok?e.json():(t._showErrorMessasge("Ошибка: ".concat(e.status)),Promise.reject("Ошибка: ".concat(e.status)))}))}},{key:"setUserInfo",value:function(t){var e=this;return this._settingsObj.method="PATCH",this._settingsObj.body=JSON.stringify({name:t.name,about:t.profession}),fetch("".concat(this._baseUrl,"/users/me"),this._settingsObj).then((function(t){return t.ok?t.json():(e._showErrorMessasge("Ошибка: ".concat(t.status)),Promise.reject("Ошибка: ".concat(t.status)))}))}},{key:"postNewCard",value:function(t){var e=this;return this._settingsObj.method="POST",this._settingsObj.body=JSON.stringify({name:t.name,link:t.link}),fetch("".concat(this._baseUrl,"/cards"),this._settingsObj).then((function(t){return t.ok?t.json():(e._showErrorMessasge("Ошибка: ".concat(t.status)),Promise.reject("Ошибка: ".concat(t.status)))}))}},{key:"deleteCard",value:function(t){var e=this;console.log(t),this._settingsObj.method="DELETE",fetch("".concat(this._baseUrl,"/cards/").concat(t),this._settingsObj).then((function(t){return t.ok?t.json():(e._showErrorMessasge("Ошибка: ".concat(t.status)),Promise.reject("Ошибка: ".concat(t.status)))}))}},{key:"likesToggle",value:function(t,e){var r=this;return this._settingsObj.method=e,fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),this._settingsObj).then((function(t){return t.ok?t.json():(r._showErrorMessasge("Ошибка: ".concat(t.status)),Promise.reject("Ошибка: ".concat(t.status)))}))}},{key:"patchAvatar",value:function(t){var e=this;return this._settingsObj.method="PATCH",this._settingsObj.body=JSON.stringify({avatar:t.url}),fetch("".concat(this._baseUrl,"/users/me/avatar"),this._settingsObj).then((function(t){return t.ok?t.json():(e._showErrorMessasge("Ошибка: ".concat(t.status)),Promise.reject("Ошибка: ".concat(t.status)))}))}}],r&&K(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function X(t){return o.name=t.name,o.profession=t.about,o.url=t.avatar,o.cohort=t.cohort,o.id=t._id,o}function Y(t,e){var r={};r.src=t,r.alt=e,rt.open(r)}function Z(t,e){lt.open(t,e)}function $(t,e){var r=this;e.some((function(t){return t.name===o.name}))?et.likesToggle(t,"DELETE").then((function(t){r.setLikes(t.likes)})):et.likesToggle(t,"PUT").then((function(t){r.setLikes(t.likes)}))}function tt(t){return new h(t,".gallery-item-template",Y,Z,$).setCard()}var et=new W({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-66",headers:{authorization:"02d169df-2e89-48d4-b456-d324fa7fca22","Content-Type":"application/json"}},{showErrFunc:function(t){f.textContent=t,ft.open()}});et.getInitialCards().then((function(t){ut.renderItemsFromArray(t.reverse())}));var rt=new L(".popup-big-photo");rt.setEventListeners();var nt=new v(t,s),ot=new v(t,n),it=new v(t,l);nt.enableValidation(),ot.enableValidation(),it.enableValidation();var ut=new g({renderer:tt},".gallery__list"),st=new U({submitFunc:function(t){return et.postNewCard(t).then((function(t){ut.addItem(tt(t))}))}},".popup-add-photo");st.setEventListeners();var at=new U({submitFunc:function(t){et.setUserInfo(t).then((function(t){X(t),pt.setUserInfo(o)}))}},".popup-edit-profile");at.setEventListeners();var ct=new U({submitFunc:function(t){et.patchAvatar(t).then((function(t){pt.setAvatar(X(t))}))}},".popup-edit-avatar");ct.setEventListeners();var lt=new z(".popup-confirm",{submitFunc:function(t){et.deleteCard(t)}});lt.setEventListeners();var ft=new O(".popup-error");ft.setEventListeners();var pt=new V({userDataSelectors:{userNameSelector:".profile__user-name",userProfessionSelector:".profile__user-profession",userAvatarSelector:".profile__avatar-edit-button"}});u.addEventListener("click",(function(t){nt.resetInputsErrors(),st.open()})),r.addEventListener("click",(function(){ot.resetInputsErrors(),at.setInputValues(pt.getUserInfo()),at.open()})),c.addEventListener("click",(function(t){t.preventDefault(),it.resetInputsErrors(),ct.open()})),et.getUserInfo().then((function(t){X(t),pt.setUserInfo(o),pt.setAvatar(o)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGdCQUM3QjBGLEdBQVdLLG9CQUtYLElBQU1VLEdBQVcsSUFBSXhFLEVBQVMsQ0FBRUMsa0JWM0pDLENBQy9CRSxpQkFBa0Isc0JBQ2xCRSx1QkFBd0IsNEJBQ3hCRSxtQkFBb0Isa0NVNkp0Qi9JLEVBQWU2QyxpQkFBaUIsU0FBUyxTQUFDQyxHQUV4Q3lKLEdBQWtCYyxvQkFDbEJWLEdBQXVCbEIsTUFDekIsSUFHQTdMLEVBQW1CaUQsaUJBQWlCLFNBQVMsV0FDM0MySixHQUFxQmEsb0JBQ3JCUixHQUEwQlMsZUFBZU4sR0FBU08sZUFDbERWLEdBQTBCcEIsTUFDNUIsSUFFQXRMLEVBQWlCMEMsaUJBQWlCLFNBQVMsU0FBQ0MsR0FDMUNBLEVBQUl1RixpQkFDSm9FLEdBQXFCWSxvQkFDckJKLEdBQXlCeEIsTUFDM0IsSUFDQUcsR0FBSTJCLGNBQWN0RCxNQUFLLFNBQUNDLEdBQ3RCa0IsRUFBZWxCLEdBQ2Y4QyxHQUFTRCxZQUFZak4sR0FDckJrTixHQUFTRyxVQUFVck4sRUFDckIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybS1pdGVtXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Zvcm0taXRlbS1lcnJvcl92aXNpYmxlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIi5wb3B1cF9fZm9ybS1pdGVtLWVycm9yXCIsXHJcbn07XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1lZGl0LXByb2ZpbGVcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2VkaXQtcHJvZmlsZS1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19mb3JtX3R5cGVfZWRpdC1wcm9maWxlXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJEYXRhID0ge307XHJcbmV4cG9ydCBjb25zdCB1c2VyRGF0YVNlbGVjdG9ycyA9IHtcclxuICB1c2VyTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLW5hbWVcIixcclxuICB1c2VyUHJvZmVzc2lvblNlbGVjdG9yOiBcIi5wcm9maWxlX191c2VyLXByb2Zlc3Npb25cIixcclxuICB1c2VyQXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ1dHRvblwiLFxyXG59O1xyXG5leHBvcnQgY29uc3QgZ2FsbGVyeUl0ZW1UZW1wbGF0ZSA9IFwiLmdhbGxlcnktaXRlbS10ZW1wbGF0ZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGRQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYWRkLXBob3RvXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkUGhvdG9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2FkZC1waG90by1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgZm9ybUFkZFBob3RvID0gcG9wdXBBZGRQaG90by5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19mb3JtX3R5cGVfYWRkLXBob3RvXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtZWRpdC1hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19hdmF0YXItZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgZm9ybUVkaXRBdmF0YXIgPSBwb3B1cEVkaXRBdmF0YXIucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fZm9ybV90eXBlX2VkaXQtYXZhdGFyXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRXJyb3JNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fZXJyb3ItbWVzc2FnZVwiXHJcbik7XHJcbiIsImltcG9ydCB7IHVzZXJEYXRhIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBjYXJkLFxyXG4gICAgZ2FsbGVyeUl0ZW1UZW1wbGF0ZSxcclxuICAgIG9wZW5Qb3B1cEZ1bmMsXHJcbiAgICBvcGVuUG9wdXBDb25maXJtLFxyXG4gICAgbGlrZXNUb2dnbGVGdW5jXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9nYWxsZXJ5SXRlbVRlbXBsYXRlID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoZ2FsbGVyeUl0ZW1UZW1wbGF0ZSlcclxuICAgICAgLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5fZ2FsZXJ5SW1hZ2UgPVxyXG4gICAgICB0aGlzLl9nYWxsZXJ5SXRlbVRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9nYWxlcnlDYXB0aW9uID1cclxuICAgICAgdGhpcy5fZ2FsbGVyeUl0ZW1UZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NpdHlcIik7XHJcbiAgICB0aGlzLl9nYWxsZXJ5bGlrZUJ1dHRvbiA9IHRoaXMuX2dhbGxlcnlJdGVtVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZ2FsbGVyeV9fbGlrZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2dhbGxlcnlUcmFzaEJ1dHRvbiA9IHRoaXMuX2dhbGxlcnlJdGVtVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZ2FsbGVyeV9fYmluLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZ2FsbGVyeUl0ZW0gPVxyXG4gICAgICB0aGlzLl9nYWxsZXJ5SXRlbVRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9faXRlbVwiKTtcclxuICAgIHRoaXMuX2xpa2VfY291bnRlciA9IHRoaXMuX2dhbGxlcnlJdGVtVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZ2FsbGVyeV9fbGlrZS1jb3VudGVyXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9saWtlc0FycmF5ID0gY2FyZC5saWtlcztcclxuICAgIHRoaXMuX2xpa2VzUXVhbnRpdHkgPSBjYXJkLmxpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmQuX2lkO1xyXG4gICAgdGhpcy5fZ2FsbGVyeUl0ZW1UZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2l0ZW1cIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gY2FyZC5uYW1lO1xyXG4gICAgdGhpcy5fdXJsID0gY2FyZC5saW5rO1xyXG4gICAgdGhpcy5fY2FyZE93bmVyID0gY2FyZC5vd25lci5uYW1lO1xyXG4gICAgdGhpcy5vcGVuUG9wdXBGdW5jID0gb3BlblBvcHVwRnVuYztcclxuICAgIHRoaXMub3BlblBvcHVwQ29uZmlybSA9IG9wZW5Qb3B1cENvbmZpcm07XHJcbiAgICB0aGlzLl9saWtlc1RvZ2dsZUZ1bmMgPSBsaWtlc1RvZ2dsZUZ1bmM7XHJcbiAgfVxyXG5cclxuICBzZXRDYXJkKCkge1xyXG4gICAgdGhpcy5fY2hlY2tPd25lckNhcmQodGhpcy5fY2FyZE93bmVyKTtcclxuICAgIHRoaXMuc2V0TGlrZXModGhpcy5fbGlrZXNBcnJheSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExJc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZ2FsZXJ5SW1hZ2Uuc3JjID0gdGhpcy5fdXJsO1xyXG4gICAgdGhpcy5fZ2FsZXJ5SW1hZ2UuYWx0ID0gdGhpcy5fY2FwdGlvbjtcclxuICAgIHRoaXMuX2dhbGVyeUNhcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9jYXB0aW9uO1xyXG4gICAgcmV0dXJuIHRoaXMuX2dhbGxlcnlJdGVtVGVtcGxhdGU7XHJcbiAgfVxyXG4gIF9zZXRFdmVudExJc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2dhbGxlcnlsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PlxyXG4gICAgICB0aGlzLl9saWtlc1RvZ2dsZUZ1bmModGhpcy5fY2FyZElkLCB0aGlzLl9saWtlc0FycmF5KVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9nYWxsZXJ5VHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5fZGVsZXRlR2FsbGVyeUl0ZW0odGhpcy5fZ2FsbGVyeUl0ZW1UZW1wbGF0ZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2dhbGVyeUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMub3BlblBvcHVwRnVuYyh0aGlzLl9nYWxlcnlJbWFnZS5zcmMsIHRoaXMuX2dhbGVyeUltYWdlLmFsdCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVHYWxsZXJ5SXRlbSgpIHtcclxuICAgIHRoaXMub3BlblBvcHVwQ29uZmlybSh0aGlzLl9jYXJkSWQsIHRoaXMuX2dhbGxlcnlJdGVtKTtcclxuICB9XHJcbiAgX2NoZWNrT3duZXJDYXJkKHVzZXIpIHtcclxuICAgIGlmICghKHVzZXIgPT09IHVzZXJEYXRhLm5hbWUpKSB7XHJcbiAgICAgIHRoaXMuX2dhbGxlcnlUcmFzaEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZ2FsbGVyeV9fYmluLWJ1dHRvbl9pbnZpc2libGVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldExpa2VzKGxpa2VzQXJyYXkpIHtcclxuICAgIGlmIChsaWtlc0FycmF5LnNvbWUoKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PT0gdXNlckRhdGEubmFtZSkpIHtcclxuICAgICAgdGhpcy5fZ2FsbGVyeWxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImdhbGxlcnlfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2dhbGxlcnlsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJnYWxsZXJ5X19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9saWtlX2NvdW50ZXIudGV4dENvbnRlbnQgPSBsaWtlc0FycmF5Lmxlbmd0aDtcclxuICAgIHRoaXMuX2xpa2VzQXJyYXkgPSBsaWtlc0FycmF5O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXRPYmplY3QsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0T2JqZWN0LmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXRPYmplY3QuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0T2JqZWN0LnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldE9iamVjdC5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldE9iamVjdC5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0T2JqZWN0LmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZXMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0RXJyb3JDbGFzcylcclxuICAgICk7XHJcbiAgfVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAvLyB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcclxuICB9XHJcbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XHJcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICBjb25zdCBtZXNzYWdlRXJyb3IgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihtZXNzYWdlRXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IobWVzc2FnZUVycm9yLCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9zaG93SW5wdXRFcnJvcihtZXNzYWdlRXJyb3IsIG1lc3NhZ2UpIHtcclxuICAgIG1lc3NhZ2VFcnJvci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcbiAgICBtZXNzYWdlRXJyb3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX2hpZGVJbnB1dEVycm9yKG1lc3NhZ2VFcnJvcikge1xyXG4gICAgbWVzc2FnZUVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBtZXNzYWdlRXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRCdXR0b24sIGluYWN0aXZlQnV0dG9uQ2xhc3MpIHtcclxuICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XHJcbiAgfVxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uLCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKSB7XHJcbiAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHN1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xyXG4gIH1cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0cykpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbih0aGlzLl9zdWJtaXRCdXR0b24sIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbiwgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzLnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuICByZXNldElucHV0c0Vycm9ycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VzLmZvckVhY2goKHNwYW4pID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3Ioc3Bhbik7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgLy8gdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcbiAgYWRkSXRlbShuZXdFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChuZXdFbGVtZW50KTtcclxuICB9XHJcbiAgcmVuZGVySXRlbXNGcm9tQXJyYXkoYXJyKSB7XHJcbiAgICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0odGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uIFwiKTtcclxuICB9XHJcbiAgLy9cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX3Zpc2libGVcIik7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2Nsb3NlUG9wdXBCeUNsaWNrT3ZlcmxheSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIC8vXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfdmlzaWJsZVwiKTtcclxuICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2Nsb3NlUG9wdXBCeUNsaWNrT3ZlcmxheVxyXG4gICAgKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgLy9cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICAvL1xyXG4gIF9jbG9zZVBvcHVwQnlDbGlja092ZXJsYXkgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgLy9cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fcGxhY2UtbmFtZS1vZi1iaWctcGhvdG9cIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaW1hZ2VEYXRhKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBpbWFnZURhdGEuc3JjO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gaW1hZ2VEYXRhLmFsdDtcclxuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBpbWFnZURhdGEuYWx0O1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybXMgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBzdWJtaXRGdW5jIH0sIHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpOyAvL2RpdiDQv9C+0L/QsNC/0LBcclxuICAgIHRoaXMuX3N1Ym1pdEZ1bmMgPSBzdWJtaXRGdW5jO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taXRlbVwiKTtcclxuICB9XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dHMpO1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goXHJcbiAgICAgIChpbnB1dCkgPT4gKHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSlcclxuICAgICk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9TdWJtaXRDYWxsYmFjayA9IChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEZ1bmModGhpcy5fZ2V0SW5wdXRWYWx1ZXMuYmluZCh0aGlzKSgpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9TdWJtaXRDYWxsYmFjayk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlckRhdGFTZWxlY3RvcnMgfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHVzZXJEYXRhU2VsZWN0b3JzLnVzZXJOYW1lU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl91c2VyUHJvZmVzc2lvbkZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdXNlckRhdGFTZWxlY3RvcnMudXNlclByb2Zlc3Npb25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB1c2VyRGF0YVNlbGVjdG9ycy51c2VyQXZhdGFyU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgLy8g0LLQvtC30LLRgNCw0YnQsNC10YIg0L7QsdGK0LXQutGCINGBINC00LDQvdC90YvQvNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgdGhpcy5fdXNlckRhdGFGb3JJbnB1dHMgPSB7fTtcclxuICAgIHRoaXMuX3VzZXJEYXRhRm9ySW5wdXRzLm5hbWUgPSB0aGlzLl91c2VyTmFtZUZpZWxkLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fdXNlckRhdGFGb3JJbnB1dHMucHJvZmVzc2lvbiA9IHRoaXMuX3VzZXJQcm9mZXNzaW9uRmllbGQudGV4dENvbnRlbnQ7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFGb3JJbnB1dHM7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWVGaWVsZC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICB0aGlzLl91c2VyUHJvZmVzc2lvbkZpZWxkLnRleHRDb250ZW50ID0gdXNlckRhdGEucHJvZmVzc2lvbjtcclxuICB9XHJcbiAgc2V0QXZhdGFyKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt1c2VyRGF0YS51cmx9KWA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgc3VibWl0RnVuYyB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3N1Ym1pdEZ1bmMgPSBzdWJtaXRGdW5jO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiKTtcclxuICB9XHJcbiAgb3BlbihpZCwgY2FyZCkge1xyXG4gICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEZ1bmMoaWQpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIGNhcmQucmVtb3ZlKCk7XHJcbiAgICAgIGNhcmQgPSBudWxsO1xyXG4gICAgfTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fc3VibWl0Q2FsbGJhY2spO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9iaiwgeyBzaG93RXJyRnVuYyB9KSB7XHJcbiAgICB0aGlzLl9zaG93RXJyb3JNZXNzYXNnZSA9IHNob3dFcnJGdW5jO1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9iai5iYXNlVXJsO1xyXG4gICAgdGhpcy5fc2V0dGluZ3NPYmogPSB7fTtcclxuICAgIHRoaXMuX3NldHRpbmdzT2JqLm1ldGhvZCA9IFwiR0VUXCI7XHJcbiAgICB0aGlzLl9zZXR0aW5nc09iai5oZWFkZXJzID0gb2JqLmhlYWRlcnM7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwgdGhpcy5fc2V0dGluZ3NPYmopLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FzZ2UoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB0aGlzLl9zZXR0aW5nc09iaikudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9zaG93RXJyb3JNZXNzYXNnZShg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5nc09iai5tZXRob2QgPSBcIlBBVENIXCI7XHJcbiAgICB0aGlzLl9zZXR0aW5nc09iai5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgICBhYm91dDogdXNlckRhdGEucHJvZmVzc2lvbixcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwgdGhpcy5fc2V0dGluZ3NPYmopLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FzZ2UoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBwb3N0TmV3Q2FyZChuZXdDYXJkKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5nc09iai5tZXRob2QgPSBcIlBPU1RcIjtcclxuICAgIHRoaXMuX3NldHRpbmdzT2JqLmJvZHkgPSBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIG5hbWU6IG5ld0NhcmQubmFtZSxcclxuICAgICAgbGluazogbmV3Q2FyZC5saW5rLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB0aGlzLl9zZXR0aW5nc09iaikudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9zaG93RXJyb3JNZXNzYXNnZShg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgIGNvbnNvbGUubG9nKGlkKTtcclxuICAgIHRoaXMuX3NldHRpbmdzT2JqLm1ldGhvZCA9IFwiREVMRVRFXCI7XHJcbiAgICBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHRoaXMuX3NldHRpbmdzT2JqKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX3Nob3dFcnJvck1lc3Nhc2dlKGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgbGlrZXNUb2dnbGUoaWQsIG1ldGhvZCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3NPYmoubWV0aG9kID0gbWV0aG9kO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwgdGhpcy5fc2V0dGluZ3NPYmopLnRoZW4oXHJcbiAgICAgIChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FzZ2UoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG4gIHBhdGNoQXZhdGFyKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5nc09iai5tZXRob2QgPSBcIlBBVENIXCI7XHJcbiAgICB0aGlzLl9zZXR0aW5nc09iai5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBhdmF0YXI6IHVzZXJEYXRhLnVybCxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHRoaXMuX3NldHRpbmdzT2JqKS50aGVuKFxyXG4gICAgICAocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuX3Nob3dFcnJvck1lc3Nhc2dlKGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm1zIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgc2V0dGluZ3MsXHJcbiAgcG9wdXBQcm9maWxlQnV0dG9uLFxyXG4gIGZvcm1FZGl0UHJvZmlsZSxcclxuICB1c2VyRGF0YVNlbGVjdG9ycyxcclxuICB1c2VyRGF0YSxcclxuICBnYWxsZXJ5SXRlbVRlbXBsYXRlLFxyXG4gIGFkZFBob3RvQnV0dG9uLFxyXG4gIGZvcm1BZGRQaG90byxcclxuICBhdmF0YXJFZGl0QnV0dG9uLFxyXG4gIGZvcm1FZGl0QXZhdGFyLFxyXG4gIHBvcHVwRXJyb3JNZXNzYWdlLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0tLS3QntCR0KrQr9Cb0JXQndCY0JUg0J/QldCg0JXQnNCV0J3QndCr0KUtLS0tLVxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tLS0t0KTQo9Cd0JrQptCY0JgtLS0tLVxyXG5cclxuLy8g0KTRg9C90LrRhtC40Y8g0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPINC+0LHRitC10LrRgtCwINC00LvRjyDQv9GA0L7RhNC40LvRj1xyXG5mdW5jdGlvbiBzZXRVc2VyRGF0YU9iaihyZXMpIHtcclxuICB1c2VyRGF0YS5uYW1lID0gcmVzLm5hbWU7XHJcbiAgdXNlckRhdGEucHJvZmVzc2lvbiA9IHJlcy5hYm91dDtcclxuICB1c2VyRGF0YS51cmwgPSByZXMuYXZhdGFyO1xyXG4gIHVzZXJEYXRhLmNvaG9ydCA9IHJlcy5jb2hvcnQ7XHJcbiAgdXNlckRhdGEuaWQgPSByZXMuX2lkO1xyXG4gIHJldHVybiB1c2VyRGF0YTtcclxufVxyXG4vLyDQntGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDRgSDRg9Cy0LXQu9C40YfQtdC90L3QvtC5INGE0L7RgtC+0LPRgNCw0YTQuNC10LlcclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGxpbmssIG5hbWUpIHtcclxuICBjb25zdCBwb3B1cFdpdGhJbWFnZU9iamVjdCA9IHt9O1xyXG4gIHBvcHVwV2l0aEltYWdlT2JqZWN0LnNyYyA9IGxpbms7XHJcbiAgcG9wdXBXaXRoSW1hZ2VPYmplY3QuYWx0ID0gbmFtZTtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKHBvcHVwV2l0aEltYWdlT2JqZWN0KTtcclxufVxyXG4vLyDRg9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60Lgg0LjQtyDQs9Cw0LvQtdGA0LXQuFxyXG5mdW5jdGlvbiBvcGVuUG9wdXBDb25maXJtKGlkLCBjYXJkKSB7XHJcbiAgLy8gYXBpLmRlbGV0ZUNhcmQoaWQpO1xyXG4gIHBvcHVwQXJlWW91U2h1cmUub3BlbihpZCwgY2FyZCk7XHJcbn1cclxuLy8g0YPRgdGC0LDQvdC+0LLQutCwL9GB0L3Rj9GC0LjQtSDQu9Cw0LnQutCwXHJcbmZ1bmN0aW9uIGxpa2VzVG9nZ2xlKGlkLCBsaWtlc0FycmF5KSB7XHJcbiAgaWYgKGxpa2VzQXJyYXkuc29tZSgoaXRlbSkgPT4gaXRlbS5uYW1lID09PSB1c2VyRGF0YS5uYW1lKSkge1xyXG4gICAgYXBpLmxpa2VzVG9nZ2xlKGlkLCBcIkRFTEVURVwiKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgdGhpcy5zZXRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFwaS5saWtlc1RvZ2dsZShpZCwgXCJQVVRcIikudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0TGlrZXMocmVzLmxpa2VzKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4vL1xyXG4vL9GE0YPQvdC60YbQuNGPINGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQs9Cw0LvQu9C10YDQtdC4XHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IG5ld0dhbGxlcnlDYXJkID0gbmV3IENhcmQoXHJcbiAgICBpdGVtLFxyXG4gICAgZ2FsbGVyeUl0ZW1UZW1wbGF0ZSxcclxuICAgIGhhbmRsZUNhcmRDbGljaywgLy/RhNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgSDRhNC+0YLQvlxyXG4gICAgb3BlblBvcHVwQ29uZmlybSxcclxuICAgIGxpa2VzVG9nZ2xlXHJcbiAgKTtcclxuICByZXR1cm4gbmV3R2FsbGVyeUNhcmQuc2V0Q2FyZCgpOyAvL9Cy0L7Qt9Cy0YDQsNGJ0LDQtdGCINCz0L7RgtC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YNcclxufVxyXG5cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0tLS3QntCx0YrRj9Cy0LvQtdC90LjQtSDQutC70LDRgdGB0L7Qsi0tLS0tXHJcbi8vINC+0LHRitGP0LLQu9C10L3QuNC1INC60LvQsNGB0YHQsCBBcGlcclxuLy9cclxuY29uc3QgYXBpID0gbmV3IEFwaShcclxuICB7XHJcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjZcIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogXCIwMmQxNjlkZi0yZTg5LTQ4ZDQtYjQ1Ni1kMzI0ZmE3ZmNhMjJcIixcclxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAge1xyXG4gICAgc2hvd0VyckZ1bmM6IChlcnIpID0+IHtcclxuICAgICAgcG9wdXBFcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBlcnI7XHJcbiAgICAgIHBvcHVwRXJyb3Iub3BlbigpO1xyXG4gICAgfSxcclxuICB9XHJcbik7XHJcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXMpID0+IHtcclxuICBnYWxsZXJ5LnJlbmRlckl0ZW1zRnJvbUFycmF5KHJlcy5yZXZlcnNlKCkpO1xyXG59KTtcclxuLy9cclxuLy8g0L7QsdGK0Y/QstC70LXQvdC40LUg0L7QsdGK0LXQutGC0LAg0L/QvtC/0LDQvyDRgSDQsdC+0LvRjNGI0L7QuSDRhNC+0YLQvtCz0YDQsNGE0LjQtdC5XHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwLWJpZy1waG90b1wiKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy9cclxuLy8g0LLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XHJcbmNvbnN0IGZvcm1DYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1BZGRQaG90byk7XHJcbmNvbnN0IGZvcm1Qcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FZGl0UHJvZmlsZSk7XHJcbmNvbnN0IGZvcm1BdmF0YXJWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FZGl0QXZhdGFyKTtcclxuZm9ybUNhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5mb3JtUHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmZvcm1BdmF0YXJWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuLy9cclxuLy8gINCz0LDQu9C10YDQtdGPINC40Lcg0LzQsNGB0YHQuNCy0LBcclxuY29uc3QgZ2FsbGVyeSA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiBjcmVhdGVDYXJkLFxyXG4gIH0sXHJcbiAgXCIuZ2FsbGVyeV9fbGlzdFwiXHJcbik7XHJcbi8vXHJcbi8vINC+0LHRitGP0LLQu9C10L3QuNC1INC+0LHRitC10LrRgtCwINC00L7QsdCw0LLQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60Lgg0LPQsNC70LXRgNC10LhcclxuY29uc3QgcG9wdXBXaXRoRm9ybXNBZGRQaG90byA9IG5ldyBQb3B1cFdpdGhGb3JtcyhcclxuICB7XHJcbiAgICBzdWJtaXRGdW5jOiAobmV3Q2FyZCkgPT5cclxuICAgICAgYXBpLnBvc3ROZXdDYXJkKG5ld0NhcmQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGdhbGxlcnkuYWRkSXRlbShjcmVhdGVDYXJkKHJlcykpO1xyXG4gICAgICB9KSxcclxuICB9LFxyXG4gIFwiLnBvcHVwLWFkZC1waG90b1wiXHJcbik7XHJcbnBvcHVwV2l0aEZvcm1zQWRkUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy9cclxuLy/QvtCx0YrRj9Cy0LvQtdC90LjQtSDQvtCx0YrQtdC60YLQsCDQuNC30LzQtdC90LXQvdC40Y8g0LTQsNC90L3Ri9GFINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxyXG5jb25zdCBwb3B1cFdpdGhGb3Jtc1VzZXJQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm1zKFxyXG4gIHtcclxuICAgIHN1Ym1pdEZ1bmM6IChmb3JtVmFsdWVzKSA9PiB7XHJcbiAgICAgIGFwaS5zZXRVc2VySW5mbyhmb3JtVmFsdWVzKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBzZXRVc2VyRGF0YU9iaihyZXMpO1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIucG9wdXAtZWRpdC1wcm9maWxlXCJcclxuKTtcclxucG9wdXBXaXRoRm9ybXNVc2VyUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vL1xyXG4vLyDQvtCx0YrRj9Cy0LvQtdC90LjQtSDQvtCx0YrQtdC60YLQsCDQuNC30LzQtdC90LXQvdC40LUg0LDQstCw0YLQsNGA0LrQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuY29uc3QgcG9wdXBXaXRoRm9ybXNFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm1zKFxyXG4gIHtcclxuICAgIHN1Ym1pdEZ1bmM6IChmb3JtVmFsdWVzKSA9PiB7XHJcbiAgICAgIGFwaS5wYXRjaEF2YXRhcihmb3JtVmFsdWVzKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXIoc2V0VXNlckRhdGFPYmoocmVzKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLnBvcHVwLWVkaXQtYXZhdGFyXCJcclxuKTtcclxucG9wdXBXaXRoRm9ybXNFZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8vXHJcbi8vINC+0LHRitGP0LLQu9C10L3QuNC1INC+0LHRitC10LrRgtCwINC+0YLQutGA0YvRgtC40Y8g0L7QutC90LAg0L/QvtC00YHRgtCy0LXRgNC20LTQtdC90LjRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgcG9wdXBBcmVZb3VTaHVyZSA9IG5ldyBQb3B1cENvbmZpcm0oXCIucG9wdXAtY29uZmlybVwiLCB7XHJcbiAgc3VibWl0RnVuYzogKGlkKSA9PiB7XHJcbiAgICAvLyBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwiYXNkZlwiKTtcclxuICAgIGFwaS5kZWxldGVDYXJkKGlkKTtcclxuICAgIC8vIHBvcHVwQXJlWW91U2h1cmUuY2xvc2UoKTtcclxuICB9LFxyXG59KTtcclxucG9wdXBBcmVZb3VTaHVyZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vL1xyXG4vLyDQvtCx0YrRj9Cy0LvQtdC90LjQtSDQv9C+0L/QsNC/0LAg0YEg0YHQvtC+0LHRidC10L3QuNC10Lwg0L7QsSDQvtGI0LjQsdC60LVcclxuY29uc3QgcG9wdXBFcnJvciA9IG5ldyBQb3B1cChcIi5wb3B1cC1lcnJvclwiKTtcclxucG9wdXBFcnJvci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vL1xyXG4vL1xyXG4vL9C+0LHRitGP0LLQu9C10L3QuNC1INC+0LHRitC10LrRgtCwINGD0L/RgNCw0LLQu9C10L3QuNC1INC00LDQvdC90YvQvNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQvdCwINGB0YLRgNCw0L3QuNGG0LVcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgdXNlckRhdGFTZWxlY3RvcnM6IHVzZXJEYXRhU2VsZWN0b3JzIH0pO1xyXG4vL1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tLS0t0KHQntCR0KvQotCY0K8tLS0tLVxyXG5cclxuLy8g0LrQvdC+0L/QutCwINC00L7QsdCw0LLQu9C10L3QuNGPINGE0L7RgtC+XHJcbmFkZFBob3RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZm9ybUNhcmRWYWxpZGF0b3IucmVzZXRJbnB1dHNFcnJvcnMoKTtcclxuICBwb3B1cFdpdGhGb3Jtc0FkZFBob3RvLm9wZW4oKTtcclxufSk7XHJcbi8vXHJcbi8vINC60L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcbnBvcHVwUHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZvcm1Qcm9maWxlVmFsaWRhdG9yLnJlc2V0SW5wdXRzRXJyb3JzKCk7XHJcbiAgcG9wdXBXaXRoRm9ybXNVc2VyUHJvZmlsZS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuICBwb3B1cFdpdGhGb3Jtc1VzZXJQcm9maWxlLm9wZW4oKTtcclxufSk7XHJcblxyXG5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZm9ybUF2YXRhclZhbGlkYXRpb24ucmVzZXRJbnB1dHNFcnJvcnMoKTtcclxuICBwb3B1cFdpdGhGb3Jtc0VkaXRBdmF0YXIub3BlbigpO1xyXG59KTtcclxuYXBpLmdldFVzZXJJbmZvKCkudGhlbigocmVzKSA9PiB7XHJcbiAgc2V0VXNlckRhdGFPYmoocmVzKTtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgdXNlckluZm8uc2V0QXZhdGFyKHVzZXJEYXRhKTtcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJlcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwicG9wdXBFZGl0UHJvZmlsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBvcHVwUHJvZmlsZUJ1dHRvbiIsImZvcm1FZGl0UHJvZmlsZSIsInVzZXJEYXRhIiwicG9wdXBBZGRQaG90byIsImFkZFBob3RvQnV0dG9uIiwiZm9ybUFkZFBob3RvIiwicG9wdXBFZGl0QXZhdGFyIiwiYXZhdGFyRWRpdEJ1dHRvbiIsImZvcm1FZGl0QXZhdGFyIiwicG9wdXBFcnJvck1lc3NhZ2UiLCJDYXJkIiwiY2FyZCIsImdhbGxlcnlJdGVtVGVtcGxhdGUiLCJvcGVuUG9wdXBGdW5jIiwib3BlblBvcHVwQ29uZmlybSIsImxpa2VzVG9nZ2xlRnVuYyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfZ2FsbGVyeUl0ZW1UZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZ2FsZXJ5SW1hZ2UiLCJfZ2FsZXJ5Q2FwdGlvbiIsIl9nYWxsZXJ5bGlrZUJ1dHRvbiIsIl9nYWxsZXJ5VHJhc2hCdXR0b24iLCJfZ2FsbGVyeUl0ZW0iLCJfbGlrZV9jb3VudGVyIiwiX2xpa2VzQXJyYXkiLCJsaWtlcyIsIl9saWtlc1F1YW50aXR5IiwibGVuZ3RoIiwiX2NhcmRJZCIsIl9pZCIsIl9jYXB0aW9uIiwibmFtZSIsIl91cmwiLCJsaW5rIiwiX2NhcmRPd25lciIsIm93bmVyIiwiX2xpa2VzVG9nZ2xlRnVuYyIsImtleSIsInZhbHVlIiwiX2NoZWNrT3duZXJDYXJkIiwic2V0TGlrZXMiLCJfc2V0RXZlbnRMSXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsIl9kZWxldGVHYWxsZXJ5SXRlbSIsInVzZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJsaWtlc0FycmF5Iiwic29tZSIsIml0ZW0iLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwic2V0T2JqZWN0IiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9lcnJvckNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9pbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9lcnJvck1lc3NhZ2VzIiwiX3NldEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwibWVzc2FnZUVycm9yIiwiY29uY2F0IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJtZXNzYWdlIiwic3VibWl0QnV0dG9uIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl90aGlzMiIsInNwYW4iLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwibmV3RWxlbWVudCIsInByZXBlbmQiLCJhcnIiLCJhZGRJdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX2RlZmluZVByb3BlcnR5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiX3BvcHVwIiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJfY2xvc2VQb3B1cEJ5Q2xpY2tPdmVybGF5IiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfaW1hZ2UiLCJpbWFnZURhdGEiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybXMiLCJzdWJtaXRGdW5jIiwiX3N1Ym1pdEZ1bmMiLCJfZm9ybSIsIl9mb3JtVmFsdWVzIiwiZGF0YSIsIl90aGlzMyIsIl9TdWJtaXRDYWxsYmFjayIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsInVzZXJEYXRhU2VsZWN0b3JzIiwiX3VzZXJOYW1lRmllbGQiLCJ1c2VyTmFtZVNlbGVjdG9yIiwiX3VzZXJQcm9mZXNzaW9uRmllbGQiLCJ1c2VyUHJvZmVzc2lvblNlbGVjdG9yIiwiX3VzZXJBdmF0YXIiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlckRhdGFGb3JJbnB1dHMiLCJwcm9mZXNzaW9uIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJ1cmwiLCJQb3B1cENvbmZpcm0iLCJfc3VibWl0Q2FsbGJhY2siLCJBcGkiLCJvYmoiLCJzaG93RXJyRnVuYyIsIl9zaG93RXJyb3JNZXNzYXNnZSIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9zZXR0aW5nc09iaiIsIm1ldGhvZCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJzdGF0dXMiLCJQcm9taXNlIiwicmVqZWN0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsIm5ld0NhcmQiLCJfdGhpczQiLCJfdGhpczUiLCJjb25zb2xlIiwibG9nIiwiX3RoaXM2IiwiX3RoaXM3IiwiYXZhdGFyIiwic2V0VXNlckRhdGFPYmoiLCJjb2hvcnQiLCJoYW5kbGVDYXJkQ2xpY2siLCJwb3B1cFdpdGhJbWFnZU9iamVjdCIsInBvcHVwV2l0aEltYWdlIiwib3BlbiIsInBvcHVwQXJlWW91U2h1cmUiLCJsaWtlc1RvZ2dsZSIsImFwaSIsImNyZWF0ZUNhcmQiLCJzZXRDYXJkIiwiYXV0aG9yaXphdGlvbiIsImVyciIsInBvcHVwRXJyb3IiLCJnZXRJbml0aWFsQ2FyZHMiLCJnYWxsZXJ5IiwicmVuZGVySXRlbXNGcm9tQXJyYXkiLCJyZXZlcnNlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JtQ2FyZFZhbGlkYXRvciIsImZvcm1Qcm9maWxlVmFsaWRhdG9yIiwiZm9ybUF2YXRhclZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwicG9wdXBXaXRoRm9ybXNBZGRQaG90byIsInBvc3ROZXdDYXJkIiwicG9wdXBXaXRoRm9ybXNVc2VyUHJvZmlsZSIsImZvcm1WYWx1ZXMiLCJzZXRVc2VySW5mbyIsInVzZXJJbmZvIiwicG9wdXBXaXRoRm9ybXNFZGl0QXZhdGFyIiwicGF0Y2hBdmF0YXIiLCJzZXRBdmF0YXIiLCJkZWxldGVDYXJkIiwicmVzZXRJbnB1dHNFcnJvcnMiLCJzZXRJbnB1dFZhbHVlcyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==